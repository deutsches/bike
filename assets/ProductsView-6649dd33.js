import{_ as y,o as g,c as h,d as t,n as u,e as p,f as $,L as C,r,a as c,g as k,v as A,F as m,h as D,w as V,b as f,t as v}from"./index-5b2c70a7.js";import{N,S as T}from"./NavbarFront-5899f689.js";import{A as B}from"./AddCartButton-c38bdb5b.js";import{P as E}from"./PagnationComponent-1956c7fa.js";const R={data(){return{products:[]}},props:["category"],methods:{},mounted(){}},M={class:"sticky-top",style:{top:"6rem","z-index":"10"}},U=t("h2",{class:"h2 text-lg-start text-center"},"產品類型",-1),F={class:"list-unstyled d-flex d-lg-inline-block justify-content-between"};function I(s,e,o,a,i,d){return g(),h("div",M,[U,t("ul",F,[t("li",{class:u(["mt-4 page-item",{active:o.category==="全部"}])},[t("a",{href:"#",class:"h4",onClick:e[0]||(e[0]=p(l=>s.$emit("getData",1,"全部"),["prevent"]))},"全部")],2),t("li",{class:u(["mt-4",{active:o.category==="單人車"}])},[t("a",{href:"#",class:"h4",onClick:e[1]||(e[1]=p(l=>s.$emit("getData",1,"單人車"),["prevent"]))},"單人車")],2),t("li",{class:u(["mt-4",{active:o.category==="協力車"}])},[t("a",{href:"#",class:"h4",onClick:e[2]||(e[2]=p(l=>s.$emit("getData",1,"協力車"),["prevent"]))},"協力車")],2),t("li",{class:u(["mt-4",{active:o.category==="電動車"}])},[t("a",{class:"h4",href:"#",onClick:e[3]||(e[3]=p(l=>s.$emit("get-data",1,"電動車"),["prevent"]))},"電動車")],2)])])}const S=y(R,[["render",I]]);const{VITE_APP_URL:_,VITE_APP_PATH:j}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"uaena",BASE_URL:"/bike/",MODE:"production",DEV:!1,PROD:!0},z={data(){return{allProducts:[],products:[],isLoading:!1,search:"",tempArray:[],page:{},totalPage:0,currentPage:0,category:""}},components:{RouterLink:$,LeftMenu:S,NavbarFront:N,Loading:C,AddCartButton:B,PagnationComponent:E},methods:{addCart(s,e=1){this.isLoading=!0;const o={product_id:s,qty:e};this.$http.post(`${_}v2/api/${j}/cart`,{data:o}).then(a=>{a.data.success&&(this.isLoading=!1,T.fire({timer:1500,title:"已加入購物車!",showConfirmButton:!1,icon:"success"}))}).catch(a=>{this.isLoading=!1,alert(a.data.message)})},getData(s=1,e="全部"){let o="";this.category=e,e!=="全部"?o=`${_}v2/api/uaena/products?category=${this.category}&page=${s}`:o=`${_}v2/api/uaena/products?page=${s}`,this.$http.get(o).then(a=>{this.products=a.data.products,this.tempArray=this.products,this.page=a.data.pagination,this.isLoading=!1}).catch(a=>{alert(a.data.message)})}},mounted(){this.isLoading=!0,this.getData(),window.scrollTo(0,0)},computed:{},watch:{search(s){this.tempArray=this.products.filter(e=>e.title.match(s))}}},G=t("header",{class:"header-products position-relative",style:{}},[t("h2",{class:"d-flex align-items-center justify-content-center text-white products"},"全部產品")],-1),H={style:{"background-color":"#fffcf7"}},O={class:"container pt-5 pb-5"},q={class:"row"},J={class:"col-12 d-lg-inline-block col-lg-2"},K={class:"cols-12 col-lg-10"},Q={class:"mb-4 position-relative"},W=t("i",{class:"bi bi-search position-absolute search"},null,-1),X={class:"row row-cols-1 row-cols-lg-3 g-4"},Y={class:"card shadow"},Z={class:"position-relative card-img overflow-hidden"},tt=["src"],et=t("i",{class:"bi bi-search"},null,-1),st={class:"card-body"},ot={class:"card-title fw-bold text-center mb-2"},at={class:"text-center mb-2"};function nt(s,e,o,a,i,d){const l=r("loading"),b=r("NavbarFront"),w=r("LeftMenu"),P=r("RouterLink"),L=r("AddCartButton"),x=r("PagnationComponent");return g(),h(m,null,[c(l,{active:i.isLoading,"onUpdate:active":e[0]||(e[0]=n=>i.isLoading=n),"can-cancel":!0},null,8,["active"]),c(b),G,t("div",H,[t("div",O,[t("div",q,[t("div",J,[c(w,{onGetData:d.getData,category:i.category},null,8,["onGetData","category"])]),t("div",K,[t("div",Q,[k(t("input",{type:"text",placeholder:"在此搜尋車種","onUpdate:modelValue":e[1]||(e[1]=n=>i.search=n),class:"input_search rounded-pill"},null,512),[[A,i.search]]),W]),t("div",X,[(g(!0),h(m,null,D(i.tempArray,n=>(g(),h("div",{class:"col rounded-5",key:n.id},[t("div",Y,[t("div",Z,[t("img",{class:"card-img-top",src:n.imageUrl,alt:""},null,8,tt),c(P,{class:"btn rounded-0 viewProduct text-center position-absolute w-100 py-2",to:`product/${n.id}`},{default:V(()=>[et,f("  查看商品 ")]),_:2},1032,["to"])]),t("div",st,[t("h5",ot,v(n.title),1),t("p",at,[f(" 租車價 NT $ "),t("span",null,v(n.price),1)]),c(L,{"product-id":n.id,class:"btn btn-outline-white border-top w-100 addCart"},null,8,["product-id"])])])]))),128))])])])]),c(x,{page:i.page,"get-data":d.getData,onNextPage:d.getData,category:i.category},null,8,["page","get-data","onNextPage","category"])])],64)}const dt=y(z,[["render",nt]]);export{dt as default};
